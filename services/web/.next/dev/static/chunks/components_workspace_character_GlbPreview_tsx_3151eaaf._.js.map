{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///app/components/workspace/character/GlbPreview.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { Suspense, useEffect, useMemo, useState } from \"react\";\nimport * as THREE from \"three\";\nimport { Canvas } from \"@react-three/fiber\";\nimport { OrbitControls, Environment } from \"@react-three/drei\";\nimport { GLTFLoader, type GLTF } from \"three/examples/jsm/loaders/GLTFLoader.js\";\n\nexport default function GlbPreview({ glbUrl }: { glbUrl: string }) {\n  return (\n    <Canvas camera={{ position: [0.8, 1.1, 1.6], fov: 45 }} shadows>\n      <ambientLight intensity={0.6} />\n      <directionalLight position={[2, 4, 2]} intensity={1.1} castShadow />\n      <Suspense fallback={null}>\n        <Model glbUrl={glbUrl} />\n        <Environment preset=\"city\" />\n      </Suspense>\n      <OrbitControls makeDefault />\n    </Canvas>\n  );\n}\n\nfunction Model({ glbUrl }: { glbUrl: string }) {\n  const [obj, setObj] = useState<THREE.Object3D | null>(null);\n\n  useEffect(() => {\n    let cancelled = false;\n    const loader = new GLTFLoader();\n    loader.load(\n      glbUrl,\n      (gltf) => {\n        if (cancelled) return;\n        const scene = gltf.scene;\n        scene.traverse((n: any) => {\n          if (n.isMesh) {\n            n.castShadow = true;\n            n.receiveShadow = true;\n          }\n        });\n        // Optional: center & scale to view nicely\n        const box = new THREE.Box3().setFromObject(scene);\n        const size = new THREE.Vector3();\n        box.getSize(size);\n        const center = new THREE.Vector3();\n        box.getCenter(center);\n        scene.position.sub(center);\n\n        setObj(scene);\n      },\n      undefined,\n      () => {\n        if (!cancelled) setObj(null);\n      }\n    );\n\n    return () => {\n      cancelled = true;\n    };\n  }, [glbUrl]);\n\n  if (!obj) return null;\n  return <primitive object={obj} />;\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AAAA;AACA;;;AANA;;;;;;AAQe,SAAS,WAAW,EAAE,MAAM,EAAsB;IAC/D,qBACE,6LAAC,gNAAM;QAAC,QAAQ;YAAE,UAAU;gBAAC;gBAAK;gBAAK;aAAI;YAAE,KAAK;QAAG;QAAG,OAAO;;0BAC7D,6LAAC;gBAAa,WAAW;;;;;;0BACzB,6LAAC;gBAAiB,UAAU;oBAAC;oBAAG;oBAAG;iBAAE;gBAAE,WAAW;gBAAK,UAAU;;;;;;0BACjE,6LAAC,yKAAQ;gBAAC,UAAU;;kCAClB,6LAAC;wBAAM,QAAQ;;;;;;kCACf,6LAAC,iLAAW;wBAAC,QAAO;;;;;;;;;;;;0BAEtB,6LAAC,qLAAa;gBAAC,WAAW;;;;;;;;;;;;AAGhC;KAZwB;AAcxB,SAAS,MAAM,EAAE,MAAM,EAAsB;;IAC3C,MAAM,CAAC,KAAK,OAAO,GAAG,IAAA,yKAAQ,EAAwB;IAEtD,IAAA,0KAAS;2BAAC;YACR,IAAI,YAAY;YAChB,MAAM,SAAS,IAAI,kLAAU;YAC7B,OAAO,IAAI,CACT;mCACA,CAAC;oBACC,IAAI,WAAW;oBACf,MAAM,QAAQ,KAAK,KAAK;oBACxB,MAAM,QAAQ;2CAAC,CAAC;4BACd,IAAI,EAAE,MAAM,EAAE;gCACZ,EAAE,UAAU,GAAG;gCACf,EAAE,aAAa,GAAG;4BACpB;wBACF;;oBACA,0CAA0C;oBAC1C,MAAM,MAAM,IAAI,0JAAU,GAAG,aAAa,CAAC;oBAC3C,MAAM,OAAO,IAAI,6JAAa;oBAC9B,IAAI,OAAO,CAAC;oBACZ,MAAM,SAAS,IAAI,6JAAa;oBAChC,IAAI,SAAS,CAAC;oBACd,MAAM,QAAQ,CAAC,GAAG,CAAC;oBAEnB,OAAO;gBACT;kCACA;mCACA;oBACE,IAAI,CAAC,WAAW,OAAO;gBACzB;;YAGF;mCAAO;oBACL,YAAY;gBACd;;QACF;0BAAG;QAAC;KAAO;IAEX,IAAI,CAAC,KAAK,OAAO;IACjB,qBAAO,6LAAC;QAAU,QAAQ;;;;;;AAC5B;GAxCS;MAAA"}}]
}