{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///app/app/providers.tsx"],"sourcesContent":["\"use client\";\n\nimport { SessionProvider } from \"next-auth/react\";\n\nexport function Providers({ children }: { children: React.ReactNode }) {\n  return <SessionProvider>{children}</SessionProvider>;\n}\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAIO,SAAS,UAAU,EAAE,QAAQ,EAAiC;IACnE,qBAAO,6LAAC,2JAAe;kBAAE;;;;;;AAC3B;KAFgB"}},
    {"offset": {"line": 32, "column": 0}, "map": {"version":3,"sources":["file:///app/components/theme/ThemeProvider.tsx"],"sourcesContent":["\"use client\";\n\nimport * as React from \"react\";\nimport { ThemeProvider as NextThemesProvider } from \"next-themes\";\n\nexport function ThemeProvider({ children }: { children: React.ReactNode }) {\n  return (\n    <NextThemesProvider\n      attribute=\"class\"\n      defaultTheme=\"system\"\n      enableSystem\n      disableTransitionOnChange\n    >\n      {children}\n    </NextThemesProvider>\n  );\n}"],"names":[],"mappings":";;;;;AAGA;AAHA;;;AAKO,SAAS,cAAc,EAAE,QAAQ,EAAiC;IACvE,qBACE,6LAAC,oKAAkB;QACjB,WAAU;QACV,cAAa;QACb,YAAY;QACZ,yBAAyB;kBAExB;;;;;;AAGP;KAXgB"}},
    {"offset": {"line": 64, "column": 0}, "map": {"version":3,"sources":["file:///app/components/layout/UiRouterProvider.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { createContext, useContext, useEffect, useMemo, useState } from \"react\";\n\ntype UiRouterState = {\n  activeRoute: string;\n  setActiveRoute: (r: string) => void;\n};\n\nconst UiRouterContext = createContext<UiRouterState | null>(null);\n\nconst ROUTE_KEY = \"fabricator.ui.activeRoute\";\nconst DEFAULT_ROUTE = \"character/model\";\n\nexport function UiRouterProvider({ children }: { children: React.ReactNode }) {\n  // ✅ Always start with the same value on server + first client render\n  const [activeRoute, setActiveRoute] = useState<string>(DEFAULT_ROUTE);\n\n  // ✅ Load from localStorage only after mount\n  useEffect(() => {\n    try {\n      const saved = window.localStorage.getItem(ROUTE_KEY);\n      if (saved && saved.trim().length > 0) {\n        setActiveRoute(saved);\n      }\n    } catch {\n      // ignore\n    }\n  }, []);\n\n  // Persist whenever it changes\n  useEffect(() => {\n    try {\n      if (activeRoute !== \"settings\") {\n        window.localStorage.setItem(ROUTE_KEY, activeRoute);\n      }\n    } catch {\n      // ignore\n    }\n  }, [activeRoute]);\n\n  const value = useMemo(() => ({ activeRoute, setActiveRoute }), [activeRoute]);\n\n  return <UiRouterContext.Provider value={value}>{children}</UiRouterContext.Provider>;\n}\n\nexport function useUiRouter() {\n  const ctx = useContext(UiRouterContext);\n  if (!ctx) throw new Error(\"useUiRouter must be used within UiRouterProvider\");\n  return ctx;\n}\n"],"names":[],"mappings":";;;;;;;AAEA;;;AAFA;;AASA,MAAM,gCAAkB,IAAA,8KAAa,EAAuB;AAE5D,MAAM,YAAY;AAClB,MAAM,gBAAgB;AAEf,SAAS,iBAAiB,EAAE,QAAQ,EAAiC;;IAC1E,qEAAqE;IACrE,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,yKAAQ,EAAS;IAEvD,4CAA4C;IAC5C,IAAA,0KAAS;sCAAC;YACR,IAAI;gBACF,MAAM,QAAQ,OAAO,YAAY,CAAC,OAAO,CAAC;gBAC1C,IAAI,SAAS,MAAM,IAAI,GAAG,MAAM,GAAG,GAAG;oBACpC,eAAe;gBACjB;YACF,EAAE,OAAM;YACN,SAAS;YACX;QACF;qCAAG,EAAE;IAEL,8BAA8B;IAC9B,IAAA,0KAAS;sCAAC;YACR,IAAI;gBACF,IAAI,gBAAgB,YAAY;oBAC9B,OAAO,YAAY,CAAC,OAAO,CAAC,WAAW;gBACzC;YACF,EAAE,OAAM;YACN,SAAS;YACX;QACF;qCAAG;QAAC;KAAY;IAEhB,MAAM,QAAQ,IAAA,wKAAO;2CAAC,IAAM,CAAC;gBAAE;gBAAa;YAAe,CAAC;0CAAG;QAAC;KAAY;IAE5E,qBAAO,6LAAC,gBAAgB,QAAQ;QAAC,OAAO;kBAAQ;;;;;;AAClD;GA9BgB;KAAA;AAgCT,SAAS;;IACd,MAAM,MAAM,IAAA,2KAAU,EAAC;IACvB,IAAI,CAAC,KAAK,MAAM,IAAI,MAAM;IAC1B,OAAO;AACT;IAJgB"}},
    {"offset": {"line": 145, "column": 0}, "map": {"version":3,"sources":["file:///app/components/project/ProjectProvider.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { createContext, useContext, useEffect, useMemo, useState } from \"react\";\n\nexport type ProjectState = {\n  projectId: string;\n  projectName: string;\n  character: {\n    characterId: string | null;\n    modelPath: string | null;\n    meshStatus: \"none\" | \"imported\" | \"cleaned\";\n    rigId: string | null;\n    skeletonAssigned: boolean;\n    outfitId: string | null;\n    hairId: string | null;\n    accessories: string[];\n  };\n  scene: {\n    sceneId: string | null;\n    environmentId: string | null;\n    lightingPreset: string | null;\n    cameraPreset: string | null;\n    audioTrackId: string | null;\n  };\n  animation: {\n    motionId: string | null;\n    fps: 24 | 30 | 60;\n    range: { start: number; end: number };\n    renderPreset: \"preview\" | \"final\";\n  };\n};\n\ntype ProjectContextValue = {\n  state: ProjectState;\n  setState: React.Dispatch<React.SetStateAction<ProjectState>>;\n  hydrated: boolean;\n  resetProject: () => void;\n\n  setProjectName: (name: string) => void;\n  setCharacterId: (id: string | null) => void;\n  setRigId: (id: string | null) => void;\n  setSkeletonAssigned: (v: boolean) => void;\n};\n\nconst STORAGE_KEY = \"fabricator.project.v1\";\n\nfunction defaultProject(): ProjectState {\n  return {\n    projectId: \"default\",\n    projectName: \"Untitled Project\",\n    character: {\n      characterId: null,\n      modelPath: null,\n      meshStatus: \"none\",\n      rigId: null,\n      skeletonAssigned: false,\n      outfitId: null,\n      hairId: null,\n      accessories: [],\n    },\n    scene: {\n      sceneId: null,\n      environmentId: null,\n      lightingPreset: null,\n      cameraPreset: null,\n      audioTrackId: null,\n    },\n    animation: {\n      motionId: null,\n      fps: 24,\n      range: { start: 1, end: 240 },\n      renderPreset: \"preview\",\n    },\n  };\n}\n\nfunction mergeWithDefaults(parsed: Partial<ProjectState>): ProjectState {\n  const d = defaultProject();\n  return {\n    ...d,\n    ...parsed,\n    character: { ...d.character, ...(parsed.character ?? {}) },\n    scene: { ...d.scene, ...(parsed.scene ?? {}) },\n    animation: { ...d.animation, ...(parsed.animation ?? {}) },\n  };\n}\n\nconst ProjectContext = createContext<ProjectContextValue | null>(null);\n\nexport function ProjectProvider({ children }: { children: React.ReactNode }) {\n  // ✅ deterministic on server + first client render\n  const [state, setState] = useState<ProjectState>(defaultProject);\n  const [hydrated, setHydrated] = useState(false);\n\n  // ✅ load persisted state only after mount\n  useEffect(() => {\n    try {\n      const raw = window.localStorage.getItem(STORAGE_KEY);\n      if (raw) {\n        const parsed = JSON.parse(raw) as Partial<ProjectState>;\n        setState(mergeWithDefaults(parsed));\n      }\n    } catch {\n      // ignore\n    } finally {\n      setHydrated(true);\n    }\n  }, []);\n\n  // ✅ persist only AFTER hydration so you don't overwrite saved state with defaults\n  useEffect(() => {\n    if (!hydrated) return;\n    try {\n      window.localStorage.setItem(STORAGE_KEY, JSON.stringify(state));\n    } catch {\n      // ignore\n    }\n  }, [state, hydrated]);\n\n  const resetProject = () => setState(defaultProject());\n\n  const setProjectName = (name: string) => setState((s) => ({ ...s, projectName: name }));\n  const setCharacterId = (id: string | null) =>\n    setState((s) => ({ ...s, character: { ...s.character, characterId: id } }));\n  const setRigId = (id: string | null) =>\n    setState((s) => ({ ...s, character: { ...s.character, rigId: id } }));\n  const setSkeletonAssigned = (v: boolean) =>\n    setState((s) => ({ ...s, character: { ...s.character, skeletonAssigned: v } }));\n\n  const value = useMemo<ProjectContextValue>(\n    () => ({ state, setState, hydrated, resetProject, setProjectName, setCharacterId, setRigId, setSkeletonAssigned }),\n    [state, hydrated]\n  );\n\n  return <ProjectContext.Provider value={value}>{children}</ProjectContext.Provider>;\n}\n\nexport function useProject() {\n  const ctx = useContext(ProjectContext);\n  if (!ctx) throw new Error(\"useProject must be used within ProjectProvider\");\n  return ctx;\n}"],"names":[],"mappings":"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"}}]
}